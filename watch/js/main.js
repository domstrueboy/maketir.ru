!function(){var a={init:function(){a.build(),a.filterByCategory(),a.vk(),a.router(),a.ontop(),a.resizeHeader()},build:function(){a.ajax("products","blocks","product-area","Все"),a.gallery("one","prints",188),a.gallery("two","lityo",114),a.gallery("three","lepnina",10),a.ajax("materials","rows","material-area","all")},ajax:function(t,o,n,e){$.ajax({url:t+".json"}).done(function(t){a.appendData(t,o,n,e)}).fail(function(){console.log("ajax fail!")})},fillTemplate:function(a,t,o){var n=$(a).html(),e=Handlebars.compile(n);return t.blocks=_.filter(t.blocks,function(a){for(i in a.category){if(a.category[i]===o){var t=!0;break}var t=!1}return t}),e(t)},appendData:function(t,o,n,e){var i=a.fillTemplate("#"+o,t,e);$("#"+n).empty(),$("#"+n).append(i)},filterByCategory:function(){$(".all_filter").on("click",function(){a.ajax("products","blocks","product-area","Все")}),$(".printers_filter").on("click",function(){a.ajax("products","blocks","product-area","Принтеры")}),$(".scanners_filter").on("click",function(){a.ajax("products","blocks","product-area","Сканеры")}),$(".others_filter").on("click",function(){a.ajax("products","blocks","product-area","Разное")}),$(".filters__item").on("click",function(){$(".filters__item").removeClass("active"),$(this).addClass("active")})},tapTab:function(a){$(".tabs__item").hide(),$(".nav__item").removeClass("active_tab"),$("#"+a).show(),$(".nav__item_"+a).addClass("active_tab"),$("body,html").animate({scrollTop:0},0)},router:function(){{var t=Backbone.Router.extend({routes:{"":"tab1","3dprinters":"tab1","3dprinting":"tab2",lityo:"tab3",lepnina:"tab4",materials:"tab5",contacts:"tab6"},tab1:function(){a.tapTab("tab1")},tab2:function(){a.tapTab("tab2")},tab3:function(){a.tapTab("tab3")},tab4:function(){a.tapTab("tab4")},tab5:function(){a.tapTab("tab5")},tab6:function(){a.tapTab("tab6")}});new t}Backbone.history.start()},ontop:function(){$(document).ready(function(){var a,t=!1,o=$("#ontop"),n=$(window),e=$(document.body).children(0).position().top;n.scroll(function(){window.clearTimeout(a),a=window.setTimeout(function(){n.scrollTop()<=e+10?(t=!1,o.fadeOut(200)):0==t&&(t=!0,o.stop(!0,!0).fadeTo(200,.85).on("click",function(){o.fadeOut(200)}))},100)}),$("#ontop").on("click",function(a){a.preventDefault(),$("body,html").animate({scrollTop:0},200)})})},vk:function(){VK.Widgets.Group("vk_groups",{mode:2,wide:0,width:"auto"},39116674)},gallery:function(a,t,o){for(var n="",e=o;e>0;e--)n=n+"<a class='example-image-link' href='img/"+t+"/"+e+".jpg' data-lightbox='"+t+"'><img class='example-image col-xs-3 col-sm-2 col-md-1 col-lg-1' src='img/"+t+"/"+e+"-100x100.jpg'></a>";$("#"+a).append(n)},resizeHeader:function(){var a=$('<div class="modal-measure-scrollbar"/>').prependTo($("body")),t=$('<div class="inner"/>').appendTo(a),o=a.width()-t.width();a.remove(),$(document).on("hidden.bs.modal",".modal",function(){$("header").css("padding-right","")}),$(document).on("show.bs.modal",function(){$("header").css("padding-right",o+"px")})}};a.init()}();